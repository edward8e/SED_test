
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>



    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/popup.css">



    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="/js/jquery.popup.js"></script>
    <script type="text/javascript" src="/js/plotly.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


 <link rel="stylesheet" type="text/css" href="/css/style.css">

  </head>
  <body>


<div class="container-fluid">
  <h3 align="center">Spectral Energy Distribution (SED) for ARP 220:</h3>
  <div class="row">

    <div class="col-md-8">
      <div id="my-graph"></div>
    </div>
    <div class="col-md-4">
      <h3>Two types of Error Bar Options:</h3>
      <button id="ErrorBarOFF">Error Bar OFF</button>
      <button id="ErrorBarON">Error Bar ON</button>


      <div class="onoffswitch">
          <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
          <label class="onoffswitch-label" for="myonoffswitch">
              <span class="onoffswitch-inner"></span>
              <span class="onoffswitch-switch"></span>
          </label>
      </div>

      <h4>Hover on and off</h4>
      <label class="switch">
        <input type="checkbox" name="onoffswitch1">
        <div class="slider"></div>
      </label>


      <h4>Show Spectral Lines</h4>
      <label class="switch">
        <input type="checkbox" checked>
        <div class="slider"></div>
      </label><br><br>

      <label class="switch">
        <input type="checkbox">
        <div class="slider round"></div>
      </label><br><br>

      <label class="switch">
        <input type="checkbox" checked>
        <div class="slider round"></div>
      </label>

      <form>
        <span>X-Axis: </span><select id="mySelectX" onChange="check(this);">
        <option value="1">log(Frequency [Hz])</option>
        <option value="2">log(Wavelength [microns])</option>
        </select>
        <br />

        <span>Y-Axis: </span><select id="mySelectY" onChange="check(this);">
        <option value="1">log(F_{nu} [Jy])</option>
        <option value="2">log(F_{nu} [W m^{-2} Hz(-1}])</option>
        <option value="3">log(nuF_{nu} [Jy-Hz])</option>
        <option value="4">log(nuF_{nu} [W m^{-2}])</option>
        </select>


      </form>





    </div>
  </div>




</div>



<script>
//pulls in the CSV file
Plotly.d3.csv('arp_220.csv', function(err, dataCSV){

  var x = [], y = [], t = [], s = [], type = [], number = [], errorBar = [];

  dataCSV.forEach(function(p) {
          x.push(p['Frequency']);
          y.push(p['NED Photometry Measurement']);
          t.push(p['Comments']);
          s.push(p['Photometry Measurement']);
          type.push(p['Frequency Mode']);
          number.push(p['No.']);
          errorBar.push(p['NED Uncertainty']);
      });

var arrayLength = type.length;
var i;
var out;

for(i = 0; i < arrayLength; i++)
{
  if (
    type[i] != ' Broad-band measurement'
    &&
    type[i] != ' Broad-band measurement; broad-band flux derived by integration over spectrum; synthetic band'){

    delete x[i];
    delete y[i];
  }
  else{
    out = true;
  }
}

var errorBarNull = [];
//filters out the strings and removes "+/- syntax"
 for(var i = 0; i < arrayLength; i++)
 {
    errorBar[i] = errorBar[i].replace("+/-",""); //removes "+/-"
    errorBarNull[i] = 0;
 }





var data = [
      {mode: 'markers',
      type: "scatter",
      name: 'this',
      text: number,
      // marker:{color: 'rgb(0,0,139)'},
      //
      // marker: {symbol: 'circle-open'},
      x: x,
      y: y,
      error_y: {
        type: 'data',
        array: errorBar,
        visible: true,
        thickness: 1,
        // color: 'rgb(0,0,139)'
      }}
  ];

//Graph axis related things
var layout = {
  xaxis: {
    title: 'log v (Hz)',
    type:'log',
    autorange: true,
    linecolor: 'black',
    linewidth: 2,
    mirror: true,
    ticks: 'inside',
    ticklen: 10,
    tickwidth: 2,
    },
  yaxis: {
    title: 'log f<sub>v</sub> (Jy)',
    type:'log',
    autorange: true,
    linecolor: 'black',
    linewidth: 2,
    mirror: true,
    ticks: 'inside',
    ticklen: 10,
    tickwidth: 2,
    },
  margin: {t: 20},
  hovermode: false
};

var toImage2 = {
  name: 'Download plot as a SVG',
  icon: Plotly.Icons.camera,
  click: function(gd) {
    Plotly.downloadImage(gd, {format: 'svg'})
  }
};

// var toggleHover2D = {
//     name: 'toggleHover',
//     title: 'Toggle show closest data on hover',
//     attr: 'hovermode',
//     val: null,
//     toggle: true,
//     icon: Plotly.Icons.tooltip_basic,
//     gravity: 'ne',
//     click: function(gd) {
//         Plotly.toggleHover(gd);}
// };


//Edits made to the toolbar
var toolbar = {
	scrollZoom: true, // lets us scroll to zoom in and out - works
	showLink: false, // removes the link to edit on plotly - works
	modeBarButtonsToRemove: ['select2d', 'lasso2d', 'sendDataToCloud'],
  displaylogo: false,
  modeBarButtonsToAdd: [toImage2]
};




// 1. Create the button
var button = document.getElementById("ErrorBarON").onclick = function() {

  var data_update = {
    error_y: {
      type: 'data',
      array: errorBar,
      visible: true,
      thickness: 1,
      // color: 'rgb(0,0,139)'
    }
};
    Plotly.update('my-graph', data_update);


};


// 1. Create the button
var button1 = document.getElementById("ErrorBarOFF").onclick = function() {

    var data_update = {
      error_y: {
        type: 'data',
        array: errorBarNull,
        visible: true,
        thickness: 1,
        // color: 'rgb(0,0,139)'
      }
  };
    Plotly.update('my-graph', data_update);


};


//Error Bars
var checkbox = document.querySelector("input[name=onoffswitch]").onchange = function() {
if(this.checked) {
  //When Switch is on
  var data_update = {
    error_y: {
      type: 'data',
      array: errorBar,
      visible: true,
      thickness: 1,
      // color: 'rgb(0,0,139)'
    }};
    var layout_update = {};

    Plotly.update('my-graph', data_update, layout_update);
  } else {
    //when Switch is off
    var data_update = {
      error_y: {
        type: 'data',
        array: errorBarNull,
        visible: true,
        thickness: 0.01,
        // color: 'rgb(0,0,139)'
      }};
      var layout_update = {};

    Plotly.update('my-graph', data_update, layout_update);
  }
}


//Hover on and off
var checkbox1 = document.querySelector("input[name=onoffswitch1]").onchange = function() {
if(this.checked) {
  //When switch is on
  var data_update = {};
    var layout_update = {
      hovermode: 'closest'
    };

    Plotly.update('my-graph', data_update, layout_update);
  } else {
    //when switch is off
    var data_update = {};
      var layout_update = {
        hovermode: false
      };

    Plotly.update('my-graph', data_update, layout_update);
  }
}


var xaxis_update = function check(elem) {
    document.getElementById('mySelect1').disabled = !elem.selectedIndex;
}




//Calls the plot into HTML
Plotly.newPlot('my-graph', data, layout, toolbar, button, button1, checkbox, checkbox1, xaxis_update);


});




</script>
<style>

button {
  margin-top: 20px;
  line-height: 60px;
  font-weight: bold;
  padding: 0 40px;
  background: salmon;
  border: none;
}
button:hover {
  background: lightsalmon;
}

</style>



  </body>
</html>
