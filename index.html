
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="/js/plotly.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  </head>
  <body>


<div class="container">
  <div class="row"><h3 align="center">Spectral Energy Distribution (SED) for ARP 220:</h3>
  <div id="my-graph"></div></div>

<button id="ErrorBarOFF">Error Bar OFF</button>
<button id="ErrorBarON">Error Bar ON</button>
</div>



<script>
//pulls in the CSV file
Plotly.d3.csv('arp_220.csv', function(err, dataCSV){

  var x = [], y = [], t = [], s = [], type = [], number = [], errorBar = [];

  dataCSV.forEach(function(p) {
          x.push(p['Frequency']);
          y.push(p['NED Photometry Measurement']);
          t.push(p['Comments']);
          s.push(p['Photometry Measurement']);
          type.push(p['Frequency Mode']);
          number.push(p['No.']);
          errorBar.push(p['NED Uncertainty']);
      });

var arrayLength = type.length;
var i;
var out;

for(i = 0; i < arrayLength; i++)
{
  if (
    type[i] != ' Broad-band measurement'
    &&
    type[i] != ' Broad-band measurement; broad-band flux derived by integration over spectrum; synthetic band'){

    delete x[i];
    delete y[i];
  }
  else{
    out = true;
  }
}

var errorBarNull = [];
//filters out the strings and removes "+/- syntax"
 for(var i = 0; i < arrayLength; i++)
 {
    errorBar[i] = errorBar[i].replace("+/-",""); //removes "+/-"
    errorBarNull[i] = 0;
 }





var data = [
      {mode: 'markers',
      type: "scatter",
      name: 'this',
      text: number,
      // marker:{color: 'rgb(0,0,139)'},
      //
      // marker: {symbol: 'circle-open'},
      x: x,
      y: y,
      error_y: {
        type: 'data',
        array: errorBar,
        visible: true,
        thickness: 1,
        // color: 'rgb(0,0,139)'
      }}
  ];

//Graph axis related things
var layout = {
  xaxis: {
    title: 'log v (Hz)',
    type:'log',
    autorange: true,
    linecolor: 'black',
    linewidth: 2,
    mirror: true,
    ticks: 'inside',
    ticklen: 10,
    tickwidth: 2,
    },
  yaxis: {
    title: 'log f<sub>v</sub> (Jy)',
    type:'log',
    autorange: true,
    linecolor: 'black',
    linewidth: 2,
    mirror: true,
    ticks: 'inside',
    ticklen: 10,
    tickwidth: 2,
    },
  margin: {t: 20},
  hovermode: 'closest'
};

var toImage2 = {
  name: 'Download plot as a SVG',
  icon: Plotly.Icons.camera,
  click: function(gd) {
    Plotly.downloadImage(gd, {format: 'svg'})
  }
};

//Edits made to the toolbar
var toolbar = {
	scrollZoom: true, // lets us scroll to zoom in and out - works
	showLink: false, // removes the link to edit on plotly - works
	modeBarButtonsToRemove: ['select2d', 'lasso2d', 'sendDataToCloud'],
  displaylogo: false,
  modeBarButtonsToAdd: [toImage2]
};





// 1. Create the button
var button = ("#ErrorBarON").onclick = function() {

    var data_update = {
      error_y: {
        type: 'data',
        array: errorBar,
        visible: true,
        thickness: 1,
        // color: 'rgb(0,0,139)'
      }
  };
    Plotly.update('my-graph', data_update);


};



// 1. Create the button
var button1 = document.createElement("button");
button1.innerHTML = "ErrorBar Off";

// 2. Append somewhere
var body = document.getElementsByTagName("body")[0];
body.appendChild(button1);

// 3. Add event handler
button1.onclick = function() {

    var data_update = {
      error_y: {
        type: 'data',
        array: errorBarNull,
        visible: true,
        thickness: 1,
        // color: 'rgb(0,0,139)'
      }
  };
    Plotly.update('my-graph', data_update);


};




//Calls the plot into HTML
Plotly.newPlot('my-graph', data, layout, toolbar, button, button1);


});




</script>
<style>

button {
  margin-top: 20px;
  line-height: 60px;
  font-weight: bold;
  padding: 0 40px;
  background: salmon;
  border: none;
}
button:hover {
  background: lightsalmon;
}

</style>



  </body>
</html>
